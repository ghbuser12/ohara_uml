# ユースケース名
商品・在庫を管理する

# ユースケース概要
管理者が商品情報および在庫数を登録・更新・削除・調整し、正確な在庫状況を維持する。

# アクター
- 主: 管理者

# 事前条件
- 管理者がシステムに認証済みである。  
- 該当する商品データ（あるいは仕入先データ）が参照可能である。

# 事後条件
- 商品情報および在庫数が更新され、監査ログが記録される。  
- 在庫閾値を超えた場合は在庫アラートが発行される（設定がある場合）。

# 基本フロー
1. 管理者は商品管理画面を開く。  
2. 管理者は「新規登録」「編集」「削除」「在庫調整」から操作を選択する。  
3. 管理者は商品属性（商品ID、名称、価格、SKU、カテゴリ、仕入先等）を入力または編集する。  
4. 管理者は在庫数を直接更新するか、入荷／出荷履歴を登録して在庫を調整する。  
5. システムは入力値を検証し、保存後に在庫数を更新して監査ログを記録する。  
6. システムは更新結果を表示し、閾値を下回る場合は在庫アラートを発行する。

# 代替フロー
- 3a. 入力が不正（必須項目欠落、価格が負数等）の場合: システムはエラーを表示し再入力を促す。  
- 4a. 同時更新が発生した場合: システムは競合を検出して差分確認または再試行を促す。  
- 2b. バルクインポートを選択した場合: CSV／Excelを取り込み、検証結果レポートを提示する。

# 例外処理
- DB障害や保存失敗時: 操作を中止し管理者へエラーメッセージを表示、必要ならエスカレーションログを生成する。  
- 権限不足: 操作を禁止しログを記録する。

# データ
- 商品: 商品ID、名称、SKU、価格、カテゴリ、仕入先、在庫数、最終更新者、最終更新日時  
- 在庫履歴: 操作種別（入荷／出荷／調整）、数量、日時、担当者、参照番号

# ビジネスルール
- 在庫数は負にならないこと。  
- 重要操作（価格変更・削除・大量在庫調整）は監査ログを必須とする。  
- 在庫閾値以下で自動アラート（メール/ダッシュボード）を発行する（設定に依存）。

# 関連ユースケース
- 在庫アラート設定  
- 商品登録／更新／削除（個別詳細）  
- 発注・仕入管理（別ユースケース）