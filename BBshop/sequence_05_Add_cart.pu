@startuml Web訪問者システム-カート追加シーケンス図
hide footbox
skinparam boundaryBackgroundColor #D5E8D4
skinparam controlBackgroundColor  #F8CECC
skinparam entityBackgroundColor   #DAE8FC

actor ユーザー as U
boundary 商品ページ as B1
boundary カート追加完了画面 as B2
boundary 商品一覧ページ as B3
control カート処理 as C1
entity データベース as E

' 基本フロー
U -> B1: 「カートに追加」を選択()
activate B1

B1 -> C1: 商品情報リクエスト()
activate C1
C1 -> E: 在庫確認 & 商品情報取得()
activate E
E --> C1: 在庫情報 & 商品情報
deactivate E

alt 在庫なし
  C1 -> B1: 「商品の在庫がありません」メッセージを表示()
  deactivate C1
  deactivate B1
  U -> B1: OKボタンを押す()
  B1 -> B3: 商品一覧ページを表示()
  activate B3
else 在庫あり
  C1 -> B2: カート追加完了画面を表示()
  deactivate C1
  deactivate B1
  activate B2
  U -> B2: OKボタンを押す()
  B2 -> B3: 商品一覧ページを表示()
  deactivate B2
  activate B3
end

@enduml
